---
title: "雑記：サーバのアクセス数はこれが上限かも知れない"
date: "2020-05-16"
categories: 
  - "wordpress"
  - "webサービス"
  - "ソフト・サービス"
  - "戯言"
---

どうもこんにちは、基本的にサーバエラーとは戦いたくないんですが向こうが向かってくるなら立ち向かわざるを得なく面倒くさいので勘弁して欲しい如月翔也（[@showya\_kiss](http://twitter.com/showya_kiss)）です。  
  
　今日は雑記として、今使っているさくらインターネットさんのサーバでは今のアクセス数が限界なのかな、というお話をしたいと思います。  

## そもそもなんでアクセス数の限界、という話になったのか

　そもそも何故アクセス数の限界、みたいな話が出ているかと言うと、今まさに今使っているさくらインターネットさんのサーバでリソース規制を受けている状態なんですよね。  
　この「きさらぎ めも」は今月間3500PVくらいのアクセスを貰っているんですが、ここ数日でアクセス数が100件200件落ち込みまして、原因がわからず混乱したんですがいろいろ調べていく中でサーバーが503エラーを返してアクセス者を追い返しているのが判明したのです。  
　503エラーの場合サイトのAnalyticsなんかが読み込まれる前の段階ではねている状態なのでアクセスログにも残りませんしAnalyticsにも上がってこない数値なのでサーバサイドから503エラーの発生状況を見ないとわからないんですけれども、現状400〜500アクセス、100〜200PVにあたるアクセスがサーバ側で遮断されてエラー表示になっている事が判明したのです。  

## 503エラーは結局サーバのリソース上限に抵触しているという事なので

　503エラーって要するにサーバのリソースを食いすぎて（転送量やCPUの使用率が）同サーバを使っている他ユーザの迷惑になるのでアクセスを遮断しているという事で、要するにサーバのリソース上限に抵触しているという事なのです。  
　CGIを使っているサイトや思い動画・写真なんかを載せているサイトであれば転送上限になるのも理解出来ますし、そういう場合はキャッシュ系のプログラムを導入すれば解消するんですが、残念ながらうちのサイトは写真・動画なし、CGIほぼ不使用、テキストだけで頑張っているサイトなのでキャッシュ系のプログラムも効果はないですしアクセス数自体は絞るものではないので（人に見てもらいたくて開いているサイトですからね）どうにも対処の方法がなく、どうしようかな、と思っている所です。  

## 大体の体感として月間4000アクセスあたりを上限に規制が入る

　503エラー自体は初の体験ではなく、2018年の11月にも503エラーでアクセス数ががっつり減った経験があるんですが、その時の月間PV数が3800くらいだったので、大体の体感として月間4000アクセスを目安に規制が入るというか、4000に到達しない段階で規制がかかって3000台で安定、という感じに思えます。  
　個人的には5000〜10000PV、それ以上を目指して作っているサイトなので4000アクセス程度で音を上げて貰うと困ってしまいまして、もうちょっと粘り強く支えて欲しいのです。  

## 月500円のサーバではこれが限界かもしれない

　とはいえ今使っているさくらインターネットさんのサーバーは月500円のサーバなのでお値段もお安く、あまり胸を張って「こんなにお金を払っているんだからちゃんとサポートしてくれないと困る！」と言える感じでもないんですよね。  
　サーバは頑張ってくれているんですがAnalyticsやAdsenseのレポートでは「サーバの反応が遅すぎる」という評価ですし、自分でもサイトを触っていて反応が悪いな、と思う場合がままあるので月500円のサーバではこれが限界なのかも知れないな、と思う部分は正直あります。  
　マルチドメインで使用していて8個のドメインを使っていますし、まあわりと酷使している感じはあるので労ってあげないといけないな、とは思います。  

## 月間1000円のサーバでなら解消されるんでしょうか……？

　今さくらインターネットさんを2契約しているので月間1000円の請求なんですが、じゃあこの2個をまとめて「月間1000円」のサーバさんなら今の問題解消するんでしょうかね……？今の契約は今年いっぱいまでなんですが、サーバを2個使いたいニーズの理由である「どどんとふ」というプログラムが今年の12月で終了なので、それが終わったらサーバは1つにまとめてしまって構わないんですよね。  
　そういう意味ではどどんとふはもう年間契約でお金を払いきっているのでサーバはそのままにしておいて、新しいサーバを月1000円で借りてそれを使い、今年いっぱいでさくらインターネットさんの契約は打ち切り、みたいな感じにしてもいいかもしれない、と思っています。  
　まあニーズでいうとお金を払わないでサーバを使いたいのでGoogle Adsenseで稼げる月500円（本当はちょっと足りない）で借りれるサーバが一番なんですが、ブログは趣味なので月1000円くらい払ったれや、と言われればそれもそうか、という感じなので、今毎月出している月1000円がそんなに変わらないで済むのであれば別のサーバに乗り換えてもいいかも知れません。  
　ただ、月1000円のサーバでこの問題解消するんでしょうか……？解消されないと無駄金になるので嬉しくなく、まあサーバのスペックが上がってWebの速度が上がるのであればユーザさんの体験も損ねないでしょうし良い事ではあるんですが、それがAdsenseにつながってサーバ台を払えるようになる未来があるならいいんですがそうじゃないとキツいな、というのは正直あります。  

## 今できる事としては

　まあ将来的なところは良いとして、今できる事は何かというとさくらインターネットさんのリソースブーストをいつ切るかの判断をする事なんですが（2日間ブースト・チャージに14日間かかる）、ブーストは一時的な解決にしかならないので本格的な解決はちゃんと考えないといけないなと思っていて、アクセス数のトレンドが上昇傾向で固定なのであれば一時的な負担をしてでもサーバを増強する必要があると思うんですよね。  
　夢としてAdsenseでお小遣いを稼ぐ、というのがあるので、まずAdsenseを向上させるにはWebの速度と反応をアップしないと話にならないので（もちろんコンテンツは物凄く頑張る前提ですよ）早い段階でよりリッチな環境を作っておき、そこに良質なコンテンツを流し込む事で人の流入を増やしPVを増やしてAdsenseを増やしていくという動線が明確にあるので、まあ最初の3年4年が「月1000円の持ち出し」でも構わないですよね。それで3年に2回8000円が戻ってくるなら小遣いをへそ食っているのと変わらない感覚でいけるでしょうし。  
　とまあ今できる事はあんまりないので引越し先のサーバを探すのが一番大事かな、と思うんですが、頑張りたいと思います。  

## まとめ

　という訳で借りているさくらインターネットさんのサーバがリソース上限で503エラーを吐くようになったので、取り急ぎサーバの引っ越しを考えなければならない、というお話でした。  
　WordPressを複数設置しているので引っ越しは結構面倒くさいのであまり頻繁にしたくはなく、引っ越すなら4年5年安心して使える大手で力量のあるところを、と思っています。  
　今月来月はカード請求が厳しいのであまりお金を出したくないんですが、とりあえず想定だけしておきます……。
