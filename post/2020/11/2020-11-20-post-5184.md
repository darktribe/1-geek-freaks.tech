---
title: "話にならない：Karnel Task大暴走：リカバリしよう"
date: "2020-11-20"
categories: 
  - "mac"
  - "アプリ・ソフト"
  - "ゲーム"
  - "ソフト・サービス"
  - "戯言"
---

どうもこんにちは、たいがいの事は何でもできるだろうという読みで50万もするMacBookProを買ったのに、ゲーム動画を録画しようとしただけでKarnel Taskが大暴走してカックカクの映像になってしまい非常に不満足な如月翔也（[@showya\_kiss](http://twitter.com/showya_kiss)）です。  
  
　今日はご自慢のMacBookProがKarnel Taskの暴走でまともなスペックを発揮しなくなったので激おこぷんぷん丸である、というお話をしたいと思います。ぷんぷんです。  

## 家族でマイクラをプレイしている動画を撮ろうという話になった

　先日家族会議で家族みんなでなにか一つをやっている記録を残そう、みんなでゲームとかいいよね、マイクラのサーバーがあるからいつもどおりみんなで遊ぼう、ウィザーは倒した事がないので今回はウィザーを倒すのを目的にしよう、という話をしていて、せっかくなので家族みんなで1日30分くらいの動画を撮ってYouTubeに上げて、目標はチャンネル登録1000人だね、という話をしていたのです。  
　我が家はゲーム関係の出費が非常に多く、まあチャンネル登録1000人行ったら追って収益可能になるだろうし、年間でゲーム1本分にでもなれば、という話だったんです。  
　まあ収益の話でいうと私が真面目に9年間更新しているブログですら月間500円くらいの収益なので年間でゲーム1本はハードルが高いなとは思ったんですが、家族でなにか楽しい事をするというアイディアは非常に良いアイディアですし、子供が反抗期を迎えたらおしまいになる計画なので今のうちに進行しておいたほうがいいなと思って賛成したのです。  

## 早速セッティングした

　そしてそういう話になったら速攻でやるのが我が家流で、早速マイクラのサーバーを立てて新規ワールドを作り、家族みんなのパソコンをセットアップしてマイクラの設定もして、早速準備したのです。  
　このあたり以前マイクラをやっていた時に内部用のビデオを撮っていた経験があるので前のMacBookPro（13インチ・2015年モデル）で画面録画と音声収録は余裕でできたので今回も余裕だろう、という判断で気軽に始めたんですが、実際の1本目の前にテスト用の動画を撮ったら大問題が発生したのです。  

## たかがサーバー起動とマイクラのプレイ・プレイ動画の録画だけでカクカクになったのです

　どんな問題かというと、私の自慢のMacBookPro15インチ（2018年モデル）が、たかがマイクラのサーバーを起動してマイクラをプレイし、それをQuickTimePlayerで録画するだけの簡単なお仕事にも関わらず、ラグくてカックカクになったのです。  
　それどころか本来揺らいでいけないはずのマイクラサーバーが反応遅延して他の家族のプレイも重くなりまともにプレイできない環境になってしまったのです。  
　前のMacBookPro（13インチ2015年モデル特盛・今は嫁さんが使っている）ではそんな事一回もなかったですし、マイクラでラグくなるというのはスペック的におかしいので調べなければならないと思ったのです。

## 調べてみるとKarnel Taskが大暴走していました。JAVAも暴走しています

　調べてみると起動直後はサクサク動いているんですが、途中でモッサリし出してそれからラグくなる流れだったのでサブディスプレイにアクティビティモニタを起動して確認したんですが、どうも動作中にKarnel Taskが暴走しだして600パーセント・800パーセントという数字になってCPUの使用率が100パーセントに近くなり、ラグくてカックカクになるというのが確認できました。  
　それとJAVAも挙動がおかしく、起動後に600パーセントくらいになるのは普通なんですがそれから落ち着いて推移して最終的には40パーセントくらいになるのが通常の挙動なんですが、スポットで400パーセントとかを超えているのです。  
　まあJAVAが暴走するのはKarnel Taskにつられて、という可能性はあるのでとりあえずKarnel Taskをどうにしかしないといけない感じなのです。  

## 前はユーザー引っ越しで直ったんですが今回は直らない感じなので

　Karnel Task暴走は複合要因なのでこれという対応方法がなく、経験則としてアプリ再起動・Finder再起動・Mac再起動・セーフブート・NVRAMクリア・SMCクリア・SSDにFirst Aidという知見はあるのですが、今回は何を試しても駄目で、何をやってもKarnel Taskが暴走するのです。  
　一つの手段としてユーザーを追加してそのユーザーで起動するとKarnel Taskの暴走が収まる事があるのですが（先日Appleサポートから教わった）、今回は4日前にユーザー引っ越しをして再現して、そして2日前にもユーザー引っ越しをして今再現しているので引っ越しすれば1日は持つのかもしれないんですが毎日引っ越しするのは現実的な解決であるとは言えず、今回はユーザー引っ越しでも駄目だった、という結論になると思うのです。  

## OSのリカバリが必要かな、と思います

　ここまで問題が解決しないと、あと試すのは「OSをリカバリしてみてどうか」と「使うMacを変えてどうか」なんですが、Macを変えるのは現実的ではないのでOSのリカバリを試してみないと駄目かな、と思います。  
　復旧ディスクからMojaveに戻して、MojaveからCatalinaにアップデートしてみて問題が再現するか確認してみないといけないと思います。  
　非常に面倒くさいんですが、それで問題が解消してくれるなら、まあ、1回くらいは受け入れられる解決方法だと思います。  

## 環境がないと困るのでMacBookAirが来るまではお預けです

　とはいえOSリカバリは手間と時間がかかり、一番の問題はリカバリしている間パソコンが使えないという問題があるので、今回は急ぎでOSリカバリするのではなく、今注文しているM1チップ搭載のMacBookAirが来てそっちのセットアップが終わったらMacBookProのリカバリをしようかと思います。  
　MacBookAirの方も互換性という点では問題があるかもしれないんですが、調べた範囲では私が常用しているアプリは全て互換性が確認されているという事なので、MacBookAirが来てセットアップして1日くらい使ったらさっさとMacBookProをリカバリしてしまおうと思っています。  
　OSについてはBIG SURに興味がないわけではないんですが、M1チップ搭載のMacBookAirはBIG SUR搭載なのでわざわざ現環境を破壊してまで試す必要はないな、と思っていて、まあそれを言うiOSもiPhone12ProMaxが来たらiOS14なのでそっちも引っ越さないでいいよね、という話なんですが、まあ現環境は維持しておこうと思います。  

## スペック不足ではなくKarnel Task暴走が原因なので

　今回の問題はMacBookProのスペックの問題ではなくKarnel Taskの暴走が問題なのでスペックが足りないという話ではないですし、何かパーツが壊れているという話でもないので本格的に対応するにはソフト面で試せるものは全て試すしかないので、今回は覚悟を決めて直そうかな、と思います。  
　MacBookAirを買ったからと言ってMacBookProを使わなくなる話でもないですしMacBookProにはそれにしかない利点があるので手放す予定もないですし、MacBookAirを使いながらMacBookProも使っていく予定なので、とにかく直せるものは直してしまおうと思います。
